<app-card>
  <app-card-header [name]="feature.name" [description]="feature.description"  />

  <div class="w-full max-w-2xl mx-auto">
    <app-visual-story-form
      [isLoading]="isLoading()"
      [(promptArgs)]="promptArgs"
      (generate)="handleGenerate()"
    >
      <span loading-text>{{ feature.loadingText }}</span>
      <span button-text>{{ feature.buttonText }}</span>
    </app-visual-story-form>

    <app-prompt-history
      [history]="promptHistory()"
      (promptSelected)="handleVisualStoryArgs($event)"
      (historyCleared)="onClearHistory()"
    />
  </div>

  <app-error-display [error]="error()" />

  <app-gen-media
    class="block mb-2"
    [loadingText]="feature.loadingText"
    [genMediaInput]="genMediaInput()"
    #genmedia
  >
    <p class="text-sm">Your generated {{ promptArgs().args.type}} will appear here. Please be patient.</p>
  </app-gen-media>

  <app-visual-story-video
    [firstImage]="this.genmedia()?.images()?.[0]"
    [lastImage]="this.genmedia()?.images()?.[this.numImages() - 1]"
    [userPrompt]="this.promptArgs().userPrompt"
  />
</app-card>
